{"version":3,"file":"webcomponentWrapper-D3NJN2DP.js","sources":["../../src/webcomponentWrapper.tsx"],"sourcesContent":["import { Provider as ModalProvider } from '@navikt/ds-react';\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nimport App from './App';\nimport globalCss from './global.css?inline';\nimport dialogOversiktStyles from './view/dialogliste/DialogPreview.module.css?inline';\nimport { useFnrStore } from './fnrStore';\nimport { createBrowserRouter } from 'react-router-dom';\n\nexport class DabDialog extends HTMLElement {\n    setFnr?: (fnr: string) => void;\n    connectedCallback() {\n        // Cant mount on shadowRoot, create a extra div for mounting modal\n        const shadowDomFirstChild = document.createElement('div');\n        // This will be app entry point, need to be outside modal-mount node\n        const appRoot = document.createElement('div');\n        appRoot.id = 'dialog-root';\n        const shadowRoot = this.attachShadow({ mode: 'closed' });\n        shadowRoot.appendChild(shadowDomFirstChild);\n        shadowDomFirstChild.appendChild(appRoot);\n\n        // Load styles under this shadowDom-node, not root element\n        const styleElem = document.createElement('style');\n        styleElem.innerHTML = globalCss + dialogOversiktStyles;\n        shadowRoot.appendChild(styleElem);\n\n        const fnr = this.getAttribute('data-fnr') ?? undefined;\n        try {\n            useFnrStore.getState().setFnr(fnr);\n            const root = createRoot(appRoot);\n            root.render(\n                <ModalProvider rootElement={shadowDomFirstChild}>\n                    <App createRouter={createBrowserRouter} />\n                </ModalProvider>\n            );\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n        if (name === 'data-fnr') {\n            useFnrStore.getState().setFnr(newValue);\n        }\n    }\n    static get observedAttributes() {\n        return ['data-fnr'];\n    }\n}\n"],"names":["DabDialog","HTMLElement","connectedCallback","shadowDomFirstChild","document","createElement","appRoot","id","shadowRoot","attachShadow","mode","appendChild","styleElem","innerHTML","globalCss","dialogOversiktStyles","fnr","getAttribute","undefined","useFnrStore","getState","setFnr","createRoot","render","jsx","ModalProvider","App","createBrowserRouter","e","console","error","attributeChangedCallback","name","oldValue","newValue","observedAttributes"],"mappings":"i3vPAUO,MAAMA,UAAkBC,WAAY,CAEvCC,mBAAoB,CAEhB,MAAMC,EAAsBC,SAASC,cAAc,KAAK,EAElDC,EAAUF,SAASC,cAAc,KAAK,EAC5CC,EAAQC,GAAK,cACb,MAAMC,EAAa,KAAKC,aAAa,CAAEC,KAAM,QAAA,CAAU,EACvDF,EAAWG,YAAYR,CAAmB,EAC1CA,EAAoBQ,YAAYL,CAAO,EAGvC,MAAMM,EAAYR,SAASC,cAAc,OAAO,EAChDO,EAAUC,UAAYC,EAAYC,EAClCP,EAAWG,YAAYC,CAAS,EAEhC,MAAMI,EAAM,KAAKC,aAAa,UAAU,GAAKC,OAC7C,GAAI,CACAC,EAAYC,SAAAA,EAAWC,OAAOL,CAAG,EACpBM,EAAAA,WAAWhB,CAAO,EAC1BiB,OACDC,EAAAA,IAACC,EAAA,CAAc,YAAatB,EACxB,eAACuB,EAAA,CAAI,aAAcC,CAAAA,CAAoB,CAAA,CAC3C,CACJ,CACJ,OAASC,EAAG,CACRC,QAAQC,MAAMF,CAAC,CACnB,CACJ,CAEAG,yBAAyBC,EAAcC,EAAkBC,EAAkB,CACnEF,IAAS,YACTb,EAAYC,SAAAA,EAAWC,OAAOa,CAAQ,CAE9C,CACA,WAAWC,oBAAqB,CAC5B,MAAO,CAAC,UAAU,CACtB,CACJ"}